<!DOCTYPE html>
<html lang="en">
<head>
    <title>Calculator</title>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js" integrity="sha384-vZ2WRJMwsjRMW/8U7i6PWi6AlO1L79snBrmgiDpgIWJ82z8eA5lenwvxbMV1PAh7" crossorigin="anonymous"></script>

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">-->
    <script src="assets/values/ships.js" ></script>
    <link rel="stylesheet" href="css/bootstrap-glyphicons.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/engineer-profile.css">
    <link rel="stylesheet" href="css/calculator.css">
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div id="header"><h1>CALCULATOR</h1><img class="image" src="assets/drawables/engineer-header.png"/></div>
    </div>
    <div id="menu-buttons" class="row">
        <div class="col-lg-12">
            <button id="page-1" class="flat-butt" onclick="switchPage(this)">Page 1</button>
            <button id="page-2" class="flat-butt" onclick="switchPage(this)">Page 2</button>
            <button id="page-3" class="flat-butt" onclick="switchPage(this)">Page 3</button>
            <button id="page-4" class="flat-butt" onclick="switchPage(this)">Page 4</button>
            <button id="page-5" class="flat-butt" onclick="switchPage(this)">Page 5</button>
        </div>
    </div>
    <div id="div-page-1" class="row large-top-buffer">
        <div id="content-left" class="col-lg-5">
            <div class="row">
                <div class="col-lg-5 orange-header white panel"><h6>SHIP PROFILE</h6></div>
                <div class="col-lg-5 col-lg-offset-1 orange-header white panel"><h6>MODULE UPGRADE</h6></div>
            </div>
            <div class="row small-top-buffer">
                <div class="col-lg-5 no-padding">
                    <button class="btn-block flat-butt" type="button" data-toggle="modal" data-target="#selectShipModal">Select ship</button>
                </div>
                <div class="col-lg-5 col-lg-offset-1"></div>
            </div>
            <div class="row small-top-buffer">
                <div id="ship-profile" class="col-lg-5">
                </div>
                <div id="module-upgrade" class="col-lg-5 col-lg-offset-1">
                    <p>Stuff</p>
                    <p>Stuff</p>
                    <p>Stuff</p>
                    <p>Stuff</p>
                    <p>Stuff</p>
                </div>
            </div>
        </div>
        <div id="content-right" class="col-lg-7">
            <table class="table table-sm table-hover table-inverse">
                <thead>
                <tr>
                    <th>Ship Stats</th>
                    <th>Base Value</th>
                    <th>Roll Min</th>
                    <th>Roll Avg</th>
                    <th>Roll Max</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="no-top-border">Max Jump Range</td>
                    <td>22.57</td>
                    <td><span class="red">24.82</span></td>
                    <td>29.34</td>
                    <td><span class="blue">32.72</span></td>
                </tr>
                <tr>
                    <td class="no-top-border">Full Tank Jump Range</td>
                    <td>19.88</td>
                    <td><span class="red">21.86</span></td>
                    <td>25.84</td>
                    <td><span class="blue">28.82</span></td>
                </tr>
                <tr>
                    <td class="no-top-border">Laden Jump Range</td>
                    <td>17.26</b></td>
                    <td><span class="red">21.86</span></td>
                    <td>22.43</td>
                    <td><span class="blue">25.02</span></td>
                </tr>
                <tr>
                    <td class="no-top-border">Mass Unladen</td>
                    <td>89</td>
                    <td><span class="red">97.9</span></td>
                    <td>115.7</td>
                    <td><span class="blue">129.05</span></td>
                </tr>
                <tr>
                    <td class="no-top-border">Power Draw</td>
                    <td>19</td>
                    <td><span class="red">20.9</span></td>
                    <td>24.7</td>
                    <td><span class="blue">27.55</span></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="div-page-2" class="row large-top-buffer removed">
        <div id="content-left-2" class="col-lg-5">
            <p>Page 2</p>
        </div>
        <div id="content-right-2" class="col-lg-7">
            <p>Page 2</p>
        </div>
    </div>
    <div id="div-page-3" class="row large-top-buffer removed">
        <div id="content-left-3" class="col-lg-5">
            <p>Page 3</p>
        </div>
        <div id="content-right-3" class="col-lg-7">
            <p>Page 3</p>
        </div>
    </div>
    <div id="div-page-4" class="row large-top-buffer removed">
        <div id="content-left-4" class="col-lg-5">
            <p>Page 4</p>
        </div>
        <div id="content-right-4" class="col-lg-7">
            <p>Page 4</p>
        </div>
    </div>
    <div id="div-page-5" class="row large-top-buffer removed">
        <div id="content-left-5" class="col-lg-5">
            <p>Page 5</p>
        </div>
        <div id="content-right-5" class="col-lg-7">
            <p>Page 5</p>
        </div>
    </div>

    <div class="modal fade" id="selectShipModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content modal-background">
                <div class="modal-header orange-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="selectShipModalLabel">Select ship</h4>
                </div>
                <div class="modal-body">
                    <div class="list-wrapper overflowed">
                        <div id="stored-ships" class="list-group">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-block flat-butt" data-toggle="modal" data-target="#addShipModal">Add new ship</button>
                    <button type="button" class="btn-block flat-butt" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addShipModal" tabindex="-1" role="dialog" aria-labelledby="addShipModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content modal-background">
                <div class="modal-header orange-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="addShipModalLabel">Add new ship</h4>
                </div>
                <div class="modal-body">
                    <div class="list-wrapper overflowed">
                        <form>
                            <fieldset class="form-group">
                                <label for="exampleTextarea">Paste your <a href="http://coriolis.io">coriolis.io</a> ship profile here</label>
                                <textarea class="form-control" id="exampleTextarea" rows="3"></textarea>
                            </fieldset>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-block flat-butt">Add ship</button>
                    <button type="button" class="btn-block flat-butt" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    addStoredShips();

    function addStoredShips() {
        var storedShips = getStoredShips();
        console.log(storedShips);
        for(var i = 0; i < storedShips.length; i++) {
            var storedShipsList = document.getElementById('stored-ships');
            var shipRow = document.createElement('a');
            shipRow.href = '#';
            shipRow.id = i;
            shipRow.classList = 'list-group-item list-group-item-inverted';
            shipRow.onclick = function () {
                selectShip(this)
            };
            var shipRowContents = document.createTextNode(SHIPS.ships[i].name + ' (' + SHIPS.ships[i].ship + ')');
            var deleteButton = document.createElement('button');
            deleteButton.classList = 'flat-butt pull-md-right';
            var deleteIcon = document.createElement('span');
            deleteIcon.classList = 'glyphicon glyphicon-remove';
            deleteButton.appendChild(deleteIcon);
            shipRow.appendChild(deleteButton);
            shipRow.appendChild(shipRowContents);
            storedShipsList.appendChild(shipRow);
        }
    }

    function switchPage(element) {
        for (var i = 1; i < 6; i++) {
            var page = document.getElementById('div-page-' + i);
            if (i == element.id.substr(5)) {
                page.className = page.className.replace(/(?:^|\s)removed(?!\S)/g, '');
            } else {
                page.className += " removed";
            }
        }
    }

    function selectShip(element) {
        var shipId = element.id;
        console.log(shipId);
        $("#selectShipModal").modal('hide');
        getShipOutfitting(shipId);
    }

    function getStoredShips() {
        //var ships = [SHIPS.name.replace(/ /g, '-').toLowerCase(), SHIPS.name, SHIPS.ship];
        var ships = new Array();
        for(var i = 0; i < SHIPS.ships.length; i++) {
            ships.push(SHIPS.ships[i].name.replace(/ /g, '-').toLowerCase());
        }
        return ships;
    }

    function getShipOutfitting(shipId) {
        var outfittingList = document.getElementById('ship-profile');
        var p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.bulkheads));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode('Cargo Hatch'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.powerPlant.rating + '' + SHIPS.ships[shipId].components.standard.powerPlant.class + ' Power plant'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.thrusters.rating+''+SHIPS.ships[shipId].components.standard.thrusters.class+' Thrusters'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.frameShiftDrive.rating + '' + SHIPS.ships[shipId].components.standard.frameShiftDrive.class + ' Frame Shift Drive'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.lifeSupport.rating + '' + SHIPS.ships[shipId].components.standard.lifeSupport.class + ' Life support'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.powerDistributor.rating + '' + SHIPS.ships[shipId].components.standard.powerDistributor.class + ' Power distributor'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.sensors.rating + '' + SHIPS.ships[shipId].components.standard.sensors.class + ' Sensors'));
        outfittingList.appendChild(p);
        p = document.createElement('p');
        p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.standard.fuelTank.rating + '' + SHIPS.ships[shipId].components.standard.fuelTank.class + ' Fuel tank'));
        outfittingList.appendChild(p);
        var hr = document.createElement('hr');
        outfittingList.appendChild(hr);
        for(var i = 0; i < SHIPS.ships[shipId].components.hardpoints.length; i++) {
            if(SHIPS.ships[shipId].components.hardpoints[i] != null) {
                p = document.createElement('p');
                p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.hardpoints[i].rating + '' + SHIPS.ships[shipId].components.hardpoints[i].class + ' ' + SHIPS.ships[shipId].components.hardpoints[i].group));
                outfittingList.appendChild(p);
            }
        }
        hr = document.createElement('hr');
        outfittingList.appendChild(hr);
        for(var i = 0; i < SHIPS.ships[shipId].components.utility.length; i++) {
            if(SHIPS.ships[shipId].components.utility[i] != null) {
                p = document.createElement('p');
                p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.utility[i].rating + '' + SHIPS.ships[shipId].components.utility[i].class + ' ' + SHIPS.ships[shipId].components.utility[i].group));
                outfittingList.appendChild(p);
            }
        }
        hr = document.createElement('hr');
        outfittingList.appendChild(hr);
        for(var i = 0; i < SHIPS.ships[shipId].components.internal.length; i++) {
            if(SHIPS.ships[shipId].components.internal[i] != null) {
                p = document.createElement('p');
                p.appendChild(document.createTextNode(SHIPS.ships[shipId].components.internal[i].rating + '' + SHIPS.ships[shipId].components.internal[i].class + ' ' + SHIPS.ships[shipId].components.internal[i].group));
                outfittingList.appendChild(p);
            }
        }
    }

    //$("#selectShipModal").modal('show');
    //$("#addShipModal").modal('show');
</script>
</body>
</html>